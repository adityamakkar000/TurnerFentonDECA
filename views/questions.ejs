<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Turner Fenton DECA</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="./css/questionStyles.css">
  <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Cabin:wght@600&family=DM+Serif+Text&family=Gothic+A1:wght@200;300;400;500;600;700;800;900&family=IBM+Plex+Sans:wght@100;200;300;400;600&family=Lato:wght@300;400;700&family=Montserrat:wght@200;300;400;500;600;800&family=Playfair+Display:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">

</head>


  <body>
    <div
      class="d-flex flex-column flex-shrink-0 p-3 text-white bg-dark sidebarDECA"
      style="width: 280px;">
      <a href="/"
        class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
        <svg class="bi me-2" width="40" height="32"><use
            xlink:href="#bootstrap"></use></svg>
        <span class="fs-4">Turner Fenton DECA</span>
      </a>

      <hr>
      <ul class="nav nav-pills flex-column mb-auto">
        <li>
          <a href="/landing-page" class="nav-link text-white">
            <svg class="bi me-2" width="16" height="16"><use
                xlink:href="#speedometer2"></use></svg>
            Home
          </a>
        </li>
        <li class="nav-item">
          <a href="/choice" class="nav-link active" aria-current="page">
            <svg class="bi me-2" width="16" height="16"><use
                xlink:href="#home"></use></svg>
            Questions
          </a>
        </li>
        <li class="nav-item">
          <a href="/userInformation" class="nav-link text-white" >
            <svg class="bi me-2" width="16" height="16">
              <use xlink:href="#home"></use>
            </svg>
            User Information
          </a>
        </li>
      </ul>
      <hr>
      <div class="dropdown">
        <a href="#"
          class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
          id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
          <img
            src="https://static.vecteezy.com/system/resources/thumbnails/009/734/564/small/default-avatar-profile-icon-of-social-media-user-vector.jpg"
            altwidth="32" height="32"
            class="rounded-circle me-2">
          <strong><%=username%></strong>
        </a>
        <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
          wrap button in link to logout with no styles
          <li>
            <a id="logout" href="/logout"><button type="submit" class="button-link signOut">Sign Out</button></a>
          </li>

        </ul>
      </div>
    </div>



    <div class="test">
      <div class="timer">
        <p id="number" style="display: none;"> <%= number %></p>
        <p id="demo"></p>
      </div>
      <form id="testForm" action="/questions" method="post">

        <% for(var i = 0; i < number; i++){ %>

        <div class="questionCard">
          <h6> <%= i+1 %>. <%=questions[i].Question %></h6>

          <label class="inline-label">
            <input type="radio" style="margin-bottom: 13px; margin-right: 5px;"name=<%=i%> value="A" required> <p>A. <%=questions[i].OptionOne
              %></p>
          </label>
          <br>
          <label class="inline-label">
            <input type="radio" style="margin-bottom: 13px; margin-right: 5px;" name=<%=i%> value="B" required> <p>B. <%=questions[i].OptionTwo
              %></p>
          </label>
          <br>
          <label class="inline-label">
            <input type="radio" style="margin-bottom: 13px; margin-right: 5px;" name=<%=i%> value="C" required> <p>C. <%=questions[i].OptionThree
              %></p>
          </label>
          <br>
          <label class="inline-label">
            <input type="radio" style="margin-bottom: 13px; margin-right: 5px;" name=<%=i%> value="D" required> <p>D. <%=questions[i].OptionFour
              %></p>
          </label>
          <br>

        </div>

        <% } %>

        <% var questionIds = questions.map(function(question) { return question._id; }); %>
        <input type="hidden" name="questionIds" value=<%= JSON.stringify(questionIds) %>>
        <input type="hidden" name="number" value=<%= JSON.stringify(number) %>>
        <input type="hidden" name="cluster" value=<%= JSON.stringify(cluster) %>>
        <button type="submit" class="testButton"> Submit</button>

      </form>

    </div>
    <script>

      var number = document.getElementById("number").innerHTML;
      var date = new Date().getTime();
      var countDownDate = new Date(date + number*60000).getTime();

      var getSecond = setInterval(function() {

        var now = new Date().getTime();

        var distance = countDownDate - now;
        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById("demo").innerHTML = hours + "h "
        + minutes + "m " + seconds + "s ";

        if (distance < 0) {
          clearInterval(getSecond);
          document.getElementById("demo").innerHTML = "EXPIRED";
          document.getElementById("testForm").submit();
        }
      }, 1000);
      </script>
  </body>

</html>
